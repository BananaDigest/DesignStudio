@startuml
skinparam classAttributeIconSize 0

title Detailed DesignStudio Relationships

package "DAL" {
  class DesignStudioContext
  interface IDbContext
  interface IGenericRepository
  class GenericRepository
  interface IUnitOfWork
  class UnitOfWork
  class DesignService
  class Order
  class PortfolioItem
}

package "BLL" {
  class DesignServiceDto
  class OrderDto
  class PortfolioItemDto
  interface IOrderManager
  interface IServiceManager
  interface IPortfolioManager
  interface IDesignStudioService
  class OrderManager
  class ServiceManager
  class PortfolioManager
  class DesignStudioService
  class MappingProfile
MappingProfile --> OrderDto : maps
MappingProfile --> DesignServiceDto : maps
MappingProfile --> PortfolioItemDto : maps
MappingProfile --> Order : maps from
MappingProfile --> DesignService : maps from
MappingProfile --> PortfolioItem : maps from
}

package "UI" {
  class Program
  class MenuManager
  class OrderUI
  class ServiceUI
  class PortfolioUI
  interface ICommand
  class AddServiceCommand
  class CommandInvoker
}

' DAL Inheritance and Dependencies
GenericRepository ..|> IGenericRepository
UnitOfWork      ..|> IUnitOfWork
GenericRepository --> IDbContext : uses
UnitOfWork      --> IDbContext : uses
UnitOfWork      --> IGenericRepository : Services, Orders, Portfolio
' DesignStudioContext Dependencies
DesignStudioContext --> DesignService : contains
DesignStudioContext --> Order : contains
DesignStudioContext --> PortfolioItem : contains
DesignStudioContext ..|> IDbContext : implements
UnitOfWork --> DesignStudioContext : concrete
GenericRepository --> DesignStudioContext : concrete


' Entity Relationships
DesignService "*" -- "*" Order : DesignServices
Order "1" -- "0..1" PortfolioItem

' BLL Inheritance
OrderManager    ..|> IOrderManager
ServiceManager  ..|> IServiceManager
PortfolioManager..|> IPortfolioManager
DesignStudioService ..|> IDesignStudioService
MappingProfile --|> Profile : inherits


' BLL Dependencies
OrderManager    --> IUnitOfWork
ServiceManager  --> IUnitOfWork
PortfolioManager--> IUnitOfWork
DesignStudioService --> OrderManager
DesignStudioService --> ServiceManager
DesignStudioService --> PortfolioManager
OrderManager --> OrderDto : returns
OrderManager --> DesignServiceDto : via OrderDto
ServiceManager --> DesignServiceDto : returns
PortfolioManager --> PortfolioItemDto : returns
PortfolioItemDto --> DesignServiceDto : contains

' UI Dependencies
Program          --> MenuManager
MenuManager      --> IDesignStudioService
OrderUI          --> IDesignStudioService
ServiceUI        --> IDesignStudioService
PortfolioUI      --> IDesignStudioService
AddServiceCommand--> ICommand
AddServiceCommand--> IDesignStudioService
CommandInvoker   --> ICommand

@enduml